 R←Test_019(stopFlag batchFlag);⎕TRAP;dmx;F;A;exe;rc
⍝ Exercise `RunInno` with a made-up application.
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')

 F←##.Maker.FilesAndDirs ⋄ A←##.APLTreeUtils

 :If batchFlag
     R←T._NoBatchTest
 :Else

     R←T._Failed

     Assert 0=1⊃F.RmDir'Installed'
     Assert 0=1⊃F.RmDir'MoreTests/Installed/foo'
     exe←'MoreTests/'##.Maker.RunInno'inno2'
     rc←##.Execute.Process exe
     →T.GoToTidyUp 0=F.IsFile'Installed\foo\unins000.exe'

     R←T._OK

 :EndIf

∆TidyUp:
 Assert 0=1⊃F.RmDir'Installed'
 Assert 0=1⊃F.RmDir'MoreTests/Installed/foo'
